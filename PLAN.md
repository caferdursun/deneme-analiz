# Development Plan

## Project: Deneme Analiz - University Exam Tracker

**Goal**: Build a web-based system to track and analyze Eren's university entrance exam preparation progress.

**Timeline**: 5 Phases (Iterative development)

---

## Phase 1: Foundation & Core PDF Analysis
**Duration**: Days 1-3
**Status**: Not Started

### Objectives
- Set up development environment
- Create database schema
- Implement PDF analysis with Claude API
- Build basic data storage

### Tasks

#### 1.1 Environment Setup
- [x] Create project documentation (CLAUDE.md, ARCHITECTURE.md, PLAN.md)
- [ ] Initialize Git repository
- [ ] Create directory structure
- [ ] Set up Python virtual environment
- [ ] Install core dependencies (FastAPI, SQLAlchemy, Alembic)
- [ ] Configure environment variables (.env file)
- [ ] Set up database (PostgreSQL or SQLite)

#### 1.2 Database Setup
- [ ] Design database schema (see ARCHITECTURE.md)
- [ ] Create SQLAlchemy models
  - [ ] Student model
  - [ ] Exam model
  - [ ] ExamResult model
  - [ ] SubjectResult model
  - [ ] LearningOutcome model
  - [ ] Question model
- [ ] Initialize Alembic
- [ ] Create initial migration
- [ ] Apply migration and verify tables

#### 1.3 Claude API Integration
- [ ] Create Claude API client utility
- [ ] Design PDF analysis prompt
- [ ] Test prompt with existing exam.pdf
- [ ] Implement structured JSON extraction
- [ ] Add error handling and retries
- [ ] Create validation logic for extracted data

#### 1.4 Backend API - Basic Endpoints
- [ ] Set up FastAPI application structure
- [ ] Create database connection and session management
- [ ] Implement POST /api/exams/upload endpoint
  - [ ] File upload handling
  - [ ] Save PDF to file system
  - [ ] Call Claude API for analysis
  - [ ] Parse and validate response
  - [ ] Store in database
  - [ ] Return exam ID
- [ ] Implement GET /api/exams endpoint (list all exams)
- [ ] Implement GET /api/exams/{exam_id} endpoint (get exam details)
- [ ] Add CORS middleware
- [ ] Test endpoints with Postman/curl

#### 1.5 Data Validation
- [ ] Create Pydantic schemas for request/response
- [ ] Validate extracted data format
- [ ] Check for data completeness
- [ ] Handle edge cases (canceled questions, blank answers)
- [ ] Add logging for debugging

### Deliverables
- ✅ Working backend API with PDF upload and analysis
- ✅ Database with exam data stored
- ✅ First exam (exam.pdf) successfully processed
- ✅ API documentation (auto-generated by FastAPI)

### Success Criteria
- Upload exam.pdf via API
- Get structured exam data back
- Verify data in database matches PDF content
- All 88 questions correctly mapped

---

## Phase 2: Basic Web Interface
**Duration**: Days 4-5
**Status**: Not Started

### Objectives
- Create simple React frontend
- Implement PDF upload UI
- Display exam results

### Tasks

#### 2.1 Frontend Setup
- [ ] Initialize React app with TypeScript
- [ ] Set up Tailwind CSS
- [ ] Install dependencies (React Router, React Query, Axios)
- [ ] Configure API client
- [ ] Set up routing structure

#### 2.2 Upload Page
- [ ] Create upload page component
- [ ] Implement drag-and-drop file upload
- [ ] Add file validation (PDF only, size limits)
- [ ] Show upload progress
- [ ] Handle success/error states
- [ ] Redirect to exam detail on success

#### 2.3 Exam List Page
- [ ] Create exam list component
- [ ] Fetch exams from API
- [ ] Display exam cards with summary
  - Exam name and date
  - Overall net score
  - Subject breakdown
  - Rankings
- [ ] Add sorting (by date, score)
- [ ] Click to view details

#### 2.4 Exam Detail Page
- [ ] Create exam detail layout
- [ ] Display overall results
  - Net score, rankings
  - Class and school comparison
- [ ] Display subject breakdown table
- [ ] Show correct/wrong/blank for each subject
- [ ] Display learning outcomes list
- [ ] Show question-level data
- [ ] Highlight wrong and blank questions

#### 2.5 Basic Styling
- [ ] Create consistent layout
- [ ] Add responsive design (mobile-friendly)
- [ ] Use Tailwind for styling
- [ ] Add loading states
- [ ] Add error boundaries

### Deliverables
- ✅ Working web interface
- ✅ Can upload PDFs through UI
- ✅ Can view list of all exams
- ✅ Can view detailed exam results

### Success Criteria
- User can upload exam.pdf via web interface
- Results display correctly with all details
- Mobile-responsive design
- Smooth user experience

---

## Phase 3: Analytics & Visualizations
**Duration**: Days 6-8
**Status**: Not Started

### Objectives
- Implement analytics calculations
- Create interactive charts
- Build dashboard

### Tasks

#### 3.1 Backend Analytics API
- [ ] Implement GET /api/analytics/overview
  - Overall progress summary
  - Total exams count
  - Average net score trend
  - Best/worst subjects
- [ ] Implement GET /api/analytics/subjects
  - Per-subject progress over time
  - Subject comparisons
- [ ] Implement GET /api/analytics/trends
  - Net score evolution
  - Ranking trends
  - Improvement velocity
- [ ] Implement GET /api/analytics/comparisons
  - Student vs. class average trends
  - Student vs. school average trends
- [ ] Implement GET /api/analytics/learning-outcomes
  - Topic-level success rates
  - Weak areas identification
  - Improvement tracking by topic
- [ ] Add caching for expensive queries
- [ ] Optimize database queries with proper indexes

#### 3.2 Chart Components
- [ ] Install charting library (Recharts or Chart.js)
- [ ] Create LineChart component (score trends)
- [ ] Create BarChart component (subject comparisons)
- [ ] Create PieChart component (subject distribution)
- [ ] Create RadarChart component (multi-dimension comparison)
- [ ] Create AreaChart component (cumulative progress)
- [ ] Make charts responsive and interactive

#### 3.3 Dashboard Page
- [ ] Create dashboard layout
- [ ] Add summary cards
  - Total exams
  - Latest net score
  - Average score
  - Ranking trend
- [ ] Add overall progress chart (net score over time)
- [ ] Add subject comparison chart
- [ ] Add student vs. averages comparison
- [ ] Add recent exams list
- [ ] Add quick stats section

#### 3.4 Subject Analysis Page
- [ ] Create subject-specific view
- [ ] Show progress chart per subject
- [ ] Display topic breakdown
- [ ] Show weak areas in subject
- [ ] Compare with class/school averages
- [ ] List related learning outcomes

#### 3.5 Learning Outcomes Page
- [ ] Create hierarchical topic display
- [ ] Show success rate by topic
- [ ] Color-code by performance level
- [ ] Filter by subject
- [ ] Show historical performance on each outcome
- [ ] Identify consistently weak outcomes

### Deliverables
- ✅ Rich analytics API
- ✅ Interactive dashboard with charts
- ✅ Detailed subject analysis
- ✅ Learning outcomes tracking

### Success Criteria
- Upload 2-3 exams to see trends
- Charts update automatically
- Can identify weak subjects and topics
- Performance is smooth (< 2s load time)

---

## Phase 4: Recommendations Engine
**Duration**: Days 9-10
**Status**: Not Started

### Objectives
- Implement recommendation algorithm
- Generate AI-powered study suggestions
- Create recommendations UI

### Tasks

#### 4.1 Recommendation Algorithm
- [ ] Design recommendation scoring system
- [ ] Implement pattern detection
  - Consistently weak subjects
  - High blank rate topics
  - Declining performance trends
  - Low learning outcome success
- [ ] Calculate impact scores
- [ ] Prioritize recommendations
- [ ] Generate action items

#### 4.2 AI-Powered Recommendations
- [ ] Create prompt for Claude to generate study suggestions
- [ ] Send student performance data to Claude
- [ ] Extract structured recommendations
- [ ] Validate and format recommendations
- [ ] Store in recommendations table

#### 4.3 Backend Recommendations API
- [ ] Implement GET /api/recommendations
  - Fetch active recommendations
  - Order by priority
  - Group by subject
- [ ] Implement POST /api/recommendations/refresh
  - Trigger recommendation regeneration
  - Use latest exam data
- [ ] Add background job for automatic regeneration
  - Trigger after each new exam
- [ ] Implement recommendation lifecycle
  - Mark as completed
  - Archive old recommendations

#### 4.4 Recommendations UI
- [ ] Create recommendations page
- [ ] Display recommendation cards
  - Priority indicator
  - Subject/topic
  - Issue description
  - Action items checklist
  - Rationale
- [ ] Group by priority
- [ ] Filter by subject
- [ ] Add mark as completed functionality
- [ ] Show impact score visualization

#### 4.5 Integration
- [ ] Show top 3 recommendations on dashboard
- [ ] Add recommendation banner on weak subjects
- [ ] Link recommendations to related learning outcomes
- [ ] Add print/export recommendations feature

### Deliverables
- ✅ Smart recommendation engine
- ✅ AI-generated study suggestions
- ✅ Actionable recommendations UI
- ✅ Automatic updates after new exams

### Success Criteria
- Recommendations are relevant and actionable
- Clear prioritization
- Covers all weak areas
- Updates automatically with new data

---

## Phase 5: Polish & Advanced Features
**Duration**: Days 11-12
**Status**: Not Started

### Objectives
- Improve UX/UI
- Add advanced features
- Optimize performance
- Prepare for production

### Tasks

#### 5.1 UX Improvements
- [ ] Add loading skeletons
- [ ] Improve error messages
- [ ] Add success notifications (toast)
- [ ] Add confirmation dialogs
- [ ] Improve mobile responsiveness
- [ ] Add keyboard shortcuts
- [ ] Add tooltips and help text
- [ ] Implement dark mode (optional)

#### 5.2 Advanced Features
- [ ] Compare two exams side-by-side
- [ ] Export data to Excel/CSV
- [ ] Generate PDF report
- [ ] Question review mode
  - Review wrong questions
  - Mark questions for later review
- [ ] Study progress tracking
  - Mark topics as studied
  - Track study time
- [ ] Goal setting
  - Set target scores
  - Track progress towards goals

#### 5.3 Performance Optimization
- [ ] Implement pagination for exam lists
- [ ] Add database query optimization
- [ ] Implement caching strategy
- [ ] Optimize PDF processing time
- [ ] Add lazy loading for images/charts
- [ ] Minimize bundle size

#### 5.4 Testing
- [ ] Write backend unit tests
  - Test models
  - Test services
  - Test API endpoints
- [ ] Write frontend component tests
- [ ] Add integration tests
- [ ] Test error scenarios
- [ ] Test with multiple PDFs

#### 5.5 Documentation
- [ ] Write API documentation
- [ ] Create user guide
- [ ] Add code comments
- [ ] Document deployment process
- [ ] Create troubleshooting guide

#### 5.6 Deployment Preparation
- [ ] Set up production database
- [ ] Configure production environment variables
- [ ] Set up Nginx reverse proxy
- [ ] Create systemd service for backend
- [ ] Build optimized frontend
- [ ] Set up SSL certificate
- [ ] Configure firewall
- [ ] Set up backup strategy
- [ ] Add monitoring and logging

### Deliverables
- ✅ Polished, production-ready application
- ✅ Comprehensive test coverage
- ✅ Complete documentation
- ✅ Deployed and accessible

### Success Criteria
- Application is fast and responsive
- No critical bugs
- Easy to use
- Ready for daily use by Eren
- Can handle multiple exam uploads

---

## Phase 6: Validation Report Enhancement
**Duration**: 1-2 Days
**Status**: Not Started
**Priority**: Medium

### Objectives
- Allow user to review and choose between Claude API and local parser results
- Persist validation report for user review
- Enable manual data source selection before database commit

### Problem Statement
Currently, the validation report appears briefly and then disappears. The system automatically merges or chooses data from Claude API and local parser, but the user has no control over which data source to trust and save to the database.

### Tasks

#### 6.1 Backend Changes
- [ ] Modify upload endpoint to return validation report without auto-saving
- [ ] Create new endpoint: POST /api/exams/{exam_id}/confirm
  - Accept data_source parameter ("claude" or "local")
  - Save chosen data to database
  - Mark exam as confirmed
- [ ] Add exam status field (pending_confirmation, confirmed)
- [ ] Store both Claude and local parser results temporarily
- [ ] Add cleanup job for unconfirmed exams after 24 hours

#### 6.2 Frontend - Validation Review Page
- [ ] Create ValidationReviewPage component
- [ ] Display side-by-side comparison:
  - Left column: Claude API results
  - Right column: Local parser results
- [ ] Highlight differences between two sources
  - Use color coding (green = match, red = mismatch)
  - Show field-by-field comparison
- [ ] Add comparison statistics
  - Overall accuracy match percentage
  - Number of discrepancies
  - Critical vs. non-critical differences
- [ ] Implement data source selection
  - Radio buttons: "Use Claude API" / "Use Local Parser"
  - Or field-by-field selection for fine-grained control
- [ ] Add confirmation flow
  - "Confirm and Save" button
  - Show summary before final save
  - Redirect to exam detail page after save

#### 6.3 UI/UX Improvements
- [ ] Add visual diff highlighting
  - Red for Claude-only values
  - Blue for local parser-only values
  - Green for matching values
- [ ] Add tooltips explaining differences
- [ ] Show validation report summary
  - Total errors/warnings/info
  - Quick stats comparison
- [ ] Add "Review Later" option
  - Save as pending_confirmation status
  - Add to review queue
- [ ] Implement keyboard shortcuts
  - 'C' for Claude, 'L' for Local, 'Enter' to confirm

#### 6.4 Data Management
- [ ] Create pending exams list
  - Show all exams awaiting confirmation
  - Filter by date, status
  - Quick action buttons
- [ ] Add notification system
  - Alert user of pending reviews
  - Show count badge on navigation
- [ ] Implement auto-cleanup
  - Delete unconfirmed exams after 24h
  - Send reminder before deletion

### Deliverables
- ✅ Persistent validation reports
- ✅ Manual data source selection UI
- ✅ Side-by-side comparison view
- ✅ Pending exams management

### Success Criteria
- User can review validation report at their own pace
- Clear visual indication of data differences
- Can choose data source before database commit
- No data loss during review process
- Intuitive and fast workflow

### Example Workflow
1. User uploads PDF
2. System processes with both Claude API and local parser
3. User redirected to validation review page
4. User sees side-by-side comparison with highlighted differences
5. User selects preferred data source (or field-by-field)
6. User confirms and saves
7. Data committed to database
8. User redirected to exam detail page

---

## Phase 7: AI-Powered Learning Outcomes Cleanup
**Duration**: 1-2 Days
**Status**: Not Started
**Priority**: Medium

### Objectives
- Automatically identify and merge similar learning outcomes using Claude AI
- Provide intelligent grouping and standardization of outcome descriptions
- Enable one-click cleanup with user review and approval
- Maintain data integrity with audit trail and undo functionality

### Problem Statement
As exams are added to the system, learning outcomes from different sources may have:
- Slightly different names for the same outcome (e.g., "Deyimler" vs "Deyim Bilgisi")
- Different categorizations but same content (e.g., "Söz Sanatları" vs "Sözcük Anlamı")
- Inconsistent subject naming (e.g., "Matematik.09" vs "Matematik.10")
- Duplicate or near-duplicate entries
- Inconsistent Turkish spelling and formatting

**Current Approach Problem**: Manual Excel export/import is tedious and error-prone.

**Solution**: Use Claude AI to intelligently analyze all learning outcomes, detect semantic similarity, and suggest smart merges through an intuitive UI.

### Tasks

#### 7.1 Backend - Claude-Based Similarity Analysis Service
- [ ] Create `LearningOutcomeCleanupService` class
- [ ] Implement outcome aggregation method:
  - [ ] Fetch all learning outcomes from database
  - [ ] Group by subject for better context
  - [ ] Format data for Claude API (JSON structure)
  - [ ] Include: outcome description, category, subcategory, exam counts
- [ ] Create Claude AI analysis prompt:
  - [ ] Design prompt to detect semantic similarity
  - [ ] Ask Claude to group similar outcomes
  - [ ] Request standardized names for each group
  - [ ] Request confidence scores (0-100%) for each group
  - [ ] Handle Turkish language nuances
- [ ] Implement batch processing for large datasets:
  - [ ] Process outcomes in chunks (e.g., 100-200 per request)
  - [ ] Subject-by-subject analysis for better accuracy
  - [ ] Combine results from multiple requests
- [ ] Parse Claude's response:
  - [ ] Extract suggested groups
  - [ ] Extract confidence scores
  - [ ] Extract standardized outcome names
  - [ ] Validate response structure
- [ ] Add caching mechanism:
  - [ ] Cache Claude's analysis results
  - [ ] Invalidate cache when new exams added
  - [ ] Store analysis timestamp

#### 7.2 Backend - Smart Merge API
- [ ] Create GET /api/learning-outcomes/analyze endpoint:
  - [ ] Trigger Claude AI analysis
  - [ ] Return similarity groups with confidence scores
  - [ ] Include preview of what will be merged
  - [ ] Calculate potential impact (how many records affected)
- [ ] Create POST /api/learning-outcomes/cleanup endpoint:
  - [ ] Accept approved merge groups from frontend
  - [ ] Validate merge operations
  - [ ] Perform merge in database transaction
  - [ ] Handle merge conflicts gracefully
- [ ] Implement merge logic:
  - [ ] Select one outcome as "primary" (keeps ID, best description)
  - [ ] Aggregate statistics from all merged outcomes
  - [ ] Sum: total_questions, acquired, lost, total_appearances
  - [ ] Recalculate: average_success_rate across all merged records
  - [ ] Update all related exam_learning_outcome records
  - [ ] Soft delete merged outcomes (mark as merged_into_id)
- [ ] Handle data integrity:
  - [ ] Maintain links to source exams (don't lose provenance)
  - [ ] Update foreign key references
  - [ ] Validate no circular merge references
  - [ ] Use database transactions (all-or-nothing)

#### 7.3 Backend - Audit Trail & Undo
- [ ] Create `outcome_merge_history` table:
  - [ ] Fields: id, merged_at, merged_by, merge_group_id
  - [ ] original_outcome_id, target_outcome_id
  - [ ] original_data (JSON snapshot), confidence_score
- [ ] Implement audit logging:
  - [ ] Record every merge operation with full context
  - [ ] Store "before" state of all affected records
  - [ ] Timestamp and track who initiated merge
- [ ] Create POST /api/learning-outcomes/undo endpoint:
  - [ ] Accept merge_group_id
  - [ ] Restore original records from audit log
  - [ ] Reverse all changes in transaction
  - [ ] Validate undo is possible (no conflicting changes)
- [ ] Add GET /api/learning-outcomes/merge-history endpoint:
  - [ ] Show recent merge operations
  - [ ] Display what was merged and when
  - [ ] Allow filtering by date, subject, user

#### 7.4 Frontend - AI Cleanup Interface
- [ ] Add "Clean Up Outcomes" button on Learning Outcomes page
- [ ] Create cleanup wizard/page:
  - [ ] Step 1: Analyze - Click "Analyze with AI" button
    - Show loading state with progress
    - Display "Analyzing X outcomes..." message
  - [ ] Step 2: Review - Show Claude's suggested groups
    - Card-based layout for each similarity group
    - Display confidence score badge (90%+ green, 80-90% yellow)
    - Show all outcomes in group with details
    - Highlight what will change (before/after preview)
  - [ ] Step 3: Select - User reviews and approves/rejects
    - Checkbox to select which groups to merge
    - "Select All High Confidence" quick action
    - Ability to edit standardized name
    - Preview aggregated statistics
  - [ ] Step 4: Confirm - Final confirmation before merge
    - Summary: "X groups, Y outcomes will be merged"
    - Estimated impact on analytics
    - "Confirm Cleanup" button
  - [ ] Step 5: Results - Show merge results
    - Success/failure counts
    - Link to view merge history
    - Option to undo if needed
- [ ] Create similarity group card component:
  - [ ] Expandable card showing group details
  - [ ] Confidence score indicator
  - [ ] List all outcomes with exam counts
  - [ ] Show suggested standardized name (editable)
  - [ ] Preview merged statistics
  - [ ] Accept/Reject buttons
- [ ] Implement smart UI features:
  - [ ] Color-code by confidence (green > 90%, yellow 80-90%, red < 80%)
  - [ ] Show impact metrics (how many exams affected)
  - [ ] Tooltip explanations for why grouped
  - [ ] "Why these?" button showing Claude's reasoning
- [ ] Add safety features:
  - [ ] Warning for low-confidence merges
  - [ ] Require confirmation for bulk operations
  - [ ] Show "This cannot be auto-undone" warning if needed

#### 7.5 Frontend - Merge History & Undo Interface
- [ ] Create "Merge History" page/section
- [ ] Display recent merge operations in timeline:
  - [ ] Show date, time, and who performed merge
  - [ ] Display what was merged (group details)
  - [ ] Show confidence scores
  - [ ] Badge for "Can Undo" vs "Permanent"
- [ ] Implement undo functionality:
  - [ ] "Undo" button on recent merges
  - [ ] Confirmation dialog explaining what will be restored
  - [ ] Show loading state during undo
  - [ ] Success message with link to restored outcomes
- [ ] Add filtering and search:
  - [ ] Filter by date range
  - [ ] Filter by subject
  - [ ] Search by outcome name
  - [ ] Show/hide undone operations

### Deliverables
- ✅ Claude AI-powered similarity detection
- ✅ Intelligent grouping and standardization
- ✅ Interactive merge review interface
- ✅ One-click cleanup with user approval
- ✅ Complete audit trail with undo functionality
- ✅ Merge history and analytics

### Success Criteria
- Claude accurately identifies similar outcomes (>90% precision)
- Semantic similarity detected across Turkish language variations
- User-friendly interface requiring minimal technical knowledge
- High-confidence merges (>90%) can be batch-approved
- All merges are reversible within 30 days
- No data loss during merge operations
- Analytics automatically update after merges
- Process takes < 2 minutes for 500 outcomes

### Cost Estimation
- **Analysis**: ~$0.10-0.30 per 100 outcomes (depends on complexity)
- **Typical usage**: $0.50-1.50 per cleanup session (for 500 outcomes)
- **Frequency**: Once per month or after 10+ exams added
- **Annual cost**: ~$10-20 (very reasonable for the value)

### Example Workflow
**Scenario**: After uploading 10 exams, user notices duplicate learning outcomes

**Step-by-Step:**
1. User goes to Learning Outcomes page
2. Clicks "Clean Up Outcomes" button in top-right
3. System shows: "Found 247 learning outcomes. Analyze for duplicates?"
4. User clicks "Analyze with AI"
5. Loading state: "Analyzing outcomes with Claude AI... 30 seconds"
6. **Results Screen** appears:
   ```
   ✅ Analysis Complete!
   Found 8 similarity groups (23 outcomes can be merged)

   📊 Groups by confidence:
   - High confidence (>90%): 5 groups, 15 outcomes
   - Medium confidence (80-90%): 3 groups, 8 outcomes

   [Select All High Confidence] [Review All] [Cancel]
   ```

7. User clicks "Review All", sees groups:
   ```
   ┌─────────────────────────────────────────────────┐
   │ Group 1: Deyimler (Confidence: 95%) ✓          │
   │ Suggested name: "Deyimler ve Atasözleri"       │
   │                                                  │
   │ Will merge:                                     │
   │  • Deyimler ve Atasözleri (3 exams, 12 qs)     │
   │  • Deyim Bilgisi (2 exams, 8 qs)               │
   │  • Deyimler (1 exam, 4 qs)                     │
   │                                                  │
   │ After merge: 24 total questions, 6 exams       │
   │ [✓ Approve] [✗ Skip] [Edit Name]               │
   └─────────────────────────────────────────────────┘
   ```

8. User approves high-confidence groups, skips uncertain ones
9. Clicks "Confirm Cleanup"
10. Confirmation dialog: "Merge 5 groups (15 outcomes)? This can be undone within 30 days."
11. User confirms
12. **Results**: "✅ Successfully merged 15 outcomes into 5. Analytics updated."
13. Link to "View Merge History" for undo option

### Alternative: Automated Mode (Future Enhancement)
```
Settings → Auto-cleanup preferences:
☑ Automatically merge high-confidence duplicates (>95%)
☐ Weekly cleanup schedule
☐ Notify me before auto-merging
```

---

## Phase 8: Topic-Focused Recommendations from Learning Outcomes
**Duration**: 2-3 Days
**Status**: Not Started
**Priority**: High

### Objectives
- Enhance recommendations with topic-level granularity from learning outcomes
- Generate detailed, actionable study plans based on weak learning outcomes
- Link recommendations to specific topics and subtopics
- Provide resource suggestions for each weak learning outcome

### Problem Statement
Current recommendations (Phase 4) focus on subject-level weaknesses and general patterns. However, learning outcomes data contains rich topic-level information (categories, subcategories, outcome descriptions) that can be leveraged to create more targeted, actionable study recommendations.

For example, instead of "Improve Türkçe performance", we can say:
- "Focus on 'Deyimler ve Atasözleri' - Success rate: 35%"
- "Practice 'Cümle Bilgisi - Fiil Çatısı' questions - 8 questions lost in last 3 exams"
- "Review 'Sözcük Türleri - İsim ve Sıfat' concepts - Consistent difficulty pattern"

### Tasks

#### 8.1 Backend - Learning Outcome Analysis Service
- [ ] Create learning outcome analysis service
- [ ] Implement weak outcome identification algorithm:
  - [ ] Calculate average success rate per learning outcome across all exams
  - [ ] Identify outcomes with < 50% success rate (critical)
  - [ ] Identify outcomes with 50-70% success rate (needs improvement)
  - [ ] Detect consistently weak outcomes (low success in 3+ exams)
  - [ ] Find declining outcomes (success rate dropping over time)
  - [ ] Identify high-impact outcomes (appears frequently, high question count)
- [ ] Create outcome clustering:
  - [ ] Group by subject → category → subcategory
  - [ ] Calculate aggregate statistics per cluster
  - [ ] Identify patterns across related outcomes
- [ ] Implement outcome prioritization scoring:
  - [ ] Weight by frequency (how often it appears)
  - [ ] Weight by question count (how many questions)
  - [ ] Weight by recent performance (recent exams more important)
  - [ ] Weight by improvement potential (current success rate gap)
  - [ ] Calculate final priority score (0-100)

#### 8.2 Backend - Topic-Based Recommendation Generation
- [ ] Extend recommendation service to use learning outcomes
- [ ] Create new recommendation issue type: `weak_learning_outcome`
- [ ] Implement outcome-to-recommendation mapping:
  - [ ] For each weak outcome, generate specific recommendation
  - [ ] Extract topic from category/subcategory/description
  - [ ] Calculate impact score based on potential improvement
  - [ ] Generate detailed action items for each outcome
- [ ] Integrate with Claude API for rich recommendations:
  - [ ] Send learning outcome data (description, success rate, question count)
  - [ ] Request specific study strategies for that topic
  - [ ] Request resource recommendations (video, exercises, books)
  - [ ] Request prerequisite topics to review first
  - [ ] Request practice question suggestions
- [ ] Link recommendations to source learning outcomes:
  - [ ] Add `learning_outcome_ids` field to recommendations table
  - [ ] Store relationships for traceability
  - [ ] Enable filtering recommendations by outcome

#### 8.3 Backend - Enhanced Recommendation API
- [ ] Extend GET /api/recommendations endpoint:
  - [ ] Add `?include_outcomes=true` parameter
  - [ ] Return related learning outcome details with each recommendation
  - [ ] Include outcome statistics (success rate, appearances, trends)
- [ ] Create GET /api/recommendations/by-topic endpoint:
  - [ ] Group recommendations by subject → category → subcategory
  - [ ] Return hierarchical structure for topic tree view
  - [ ] Include aggregated statistics per topic
- [ ] Create GET /api/learning-outcomes/{id}/recommendations endpoint:
  - [ ] Get all recommendations related to specific learning outcome
  - [ ] Show historical recommendations for that outcome
  - [ ] Display progress over time

#### 8.4 Frontend - Enhanced Recommendations Page
- [ ] Update RecommendationsPage to show learning outcome details
- [ ] Add topic hierarchy display:
  - [ ] Show subject name
  - [ ] Show category (if available)
  - [ ] Show subcategory (if available)
  - [ ] Show full outcome description
- [ ] Display outcome-specific metrics on each recommendation card:
  - [ ] Success rate badge with color coding
  - [ ] Number of appearances across exams
  - [ ] Trend indicator (improving/stable/declining)
  - [ ] Total questions and lost questions count
- [ ] Add expandable "Details" section for each recommendation:
  - [ ] Study resources (videos, articles, book chapters)
  - [ ] Practice question suggestions
  - [ ] Prerequisite topics to review
  - [ ] Related outcomes that might help
- [ ] Implement topic-based filtering:
  - [ ] Filter by subject
  - [ ] Filter by category
  - [ ] Filter by outcome success rate range
  - [ ] Filter by priority level

#### 8.5 Frontend - Topic Tree View
- [ ] Create new view mode: "Topic Tree"
- [ ] Build hierarchical tree structure:
  - [ ] Root level: Subjects
  - [ ] Second level: Categories
  - [ ] Third level: Subcategories
  - [ ] Leaf level: Specific outcomes
- [ ] Add visual indicators:
  - [ ] Color-code nodes by success rate (red/yellow/green)
  - [ ] Show recommendation count badge on nodes
  - [ ] Display priority indicator for high-priority items
- [ ] Make tree interactive:
  - [ ] Expand/collapse nodes
  - [ ] Click node to view related recommendations
  - [ ] Click outcome to view detailed stats
- [ ] Add search/filter:
  - [ ] Search by topic name
  - [ ] Filter by success rate threshold
  - [ ] Show only topics with active recommendations

#### 8.6 Frontend - Study Plan Generator
- [ ] Create "Generate Study Plan" feature
- [ ] Build study plan wizard:
  - [ ] Step 1: Select time frame (1 week, 2 weeks, 1 month)
  - [ ] Step 2: Select topics to focus (from weak outcomes)
  - [ ] Step 3: Set daily study time
  - [ ] Step 4: Choose study style (intensive, balanced, light)
- [ ] Generate personalized study schedule:
  - [ ] Prioritize topics by impact score
  - [ ] Distribute topics across available time
  - [ ] Balance subjects (don't overload one subject)
  - [ ] Include review sessions for previously studied topics
  - [ ] Add practice test suggestions
- [ ] Display study plan:
  - [ ] Calendar view with daily tasks
  - [ ] Topic-by-topic breakdown
  - [ ] Progress tracking checkboxes
  - [ ] Estimated completion time per task
- [ ] Allow plan customization:
  - [ ] Drag-and-drop to reschedule
  - [ ] Add/remove topics
  - [ ] Adjust time allocations
  - [ ] Save and export plan

#### 8.7 Frontend - Learning Outcome Integration
- [ ] Update Learning Outcomes page:
  - [ ] Add "View Recommendations" button on weak outcomes
  - [ ] Show recommendation badge on outcomes with active recommendations
  - [ ] Add quick action: "Generate Recommendation" for specific outcome
- [ ] Update Subject Analysis page:
  - [ ] Show weak learning outcomes section
  - [ ] Display topic-specific recommendations inline
  - [ ] Link to detailed recommendations page
- [ ] Update Dashboard:
  - [ ] Show "Top 3 Topic Focus Areas" (weak outcomes)
  - [ ] Display topic-specific quick tips
  - [ ] Add "Study Plan" widget with next recommended topics

#### 8.8 Backend - Resource Database (Optional Enhancement)
- [ ] Create resource database table:
  - [ ] Resource ID, title, type (video/article/book/exercise)
  - [ ] URL or reference
  - [ ] Subject, category, subcategory mapping
  - [ ] Tags (difficulty level, language, source)
- [ ] Seed with common resources:
  - [ ] Popular YouTube channels for TYT subjects
  - [ ] Online practice platforms (Khan Academy, etc.)
  - [ ] Recommended textbooks
  - [ ] PDF worksheets
- [ ] Implement GET /api/resources/search endpoint:
  - [ ] Search by topic/category
  - [ ] Filter by resource type
  - [ ] Sort by relevance/rating
- [ ] Link resources to recommendations:
  - [ ] Auto-suggest resources based on topic
  - [ ] Allow manual resource assignment
  - [ ] Track resource usage and effectiveness

#### 8.9 AI-Enhanced Topic Recommendations
- [ ] Enhance Claude API prompts for topic-specific advice:
  - [ ] Include learning outcome description
  - [ ] Include historical performance data
  - [ ] Include related outcomes for context
  - [ ] Request specific study techniques for that topic
  - [ ] Request common pitfalls and mistakes to avoid
- [ ] Generate topic-specific study guides:
  - [ ] Key concepts summary
  - [ ] Common question patterns
  - [ ] Step-by-step solution strategies
  - [ ] Practice problems with solutions
- [ ] Create adaptive recommendations:
  - [ ] Adjust difficulty based on current performance
  - [ ] Suggest next topics based on mastery
  - [ ] Provide encouragement and motivation

### Deliverables
- ✅ Learning outcome-based analysis engine
- ✅ Topic-specific, granular recommendations
- ✅ Hierarchical topic tree view
- ✅ Study plan generator
- ✅ Resource recommendation system
- ✅ Enhanced recommendations with actionable details
- ✅ Integration across all relevant pages

### Success Criteria
- Recommendations are topic-specific, not just subject-level
- Each weak learning outcome has at least one actionable recommendation
- Recommendations include specific resources and study strategies
- Users can generate a personalized study plan
- Topic tree view clearly shows problem areas
- Integration with existing pages is seamless
- AI-generated advice is relevant and helpful
- System can track progress on topic-level recommendations

### Example Enhanced Recommendation

**Before (Phase 4):**
```
Priority: High
Subject: Türkçe
Issue: Weak subject performance (45% average)
Description: Türkçe dersinde genel performansınız düşük.
Action Items:
  - Türkçe konu anlatımlarını izleyin
  - Daha fazla soru çözün
  - Haftada 2 deneme sınavı yapın
```

**After (Phase 8):**
```
Priority: High
Subject: Türkçe
Topic: Söz Sanatları → Deyimler ve Atasözleri
Learning Outcome: "Metinde geçen deyim ve atasözlerinin anlamını çıkarabilme"
Success Rate: 35% (7/20 questions across 3 exams)
Trend: Declining ↓

Description: Son 3 sınavda deyimler ve atasözleri konusunda zorluk yaşıyorsunuz.
20 sorudan sadece 7'sini doğru cevapladınız. Bu konu TYT'de sıklıkla çıkmaktadır.

Action Items:
  ✓ 100 Temel Deyim listesini ezberleyin (Kaynak: PDF İndir)
  ✓ Her gün 5 yeni atasözü öğrenin ve cümlede kullanın
  ✓ Deyimlerin gerçek ve mecaz anlamlarını ayırt etme pratiği yapın
  ✓ Son 10 AYT/TYT'den deyim sorularını çözün (Kaynak: soru bankası)

Study Resources:
  📺 Video: "TYT Türkçe - Deyimler Konu Anlatımı" (YouTube - 15dk)
  📄 PDF: "En Çok Çıkan 200 Deyim ve Atasözü Listesi"
  ✏️ Practice: "Deyimler Quiz" (50 soru - online platform)

Prerequisite Topics:
  - Sözcük anlamı ve bağlam ilişkisi
  - Mecaz anlamlar

Related Weak Outcomes:
  - "Atasözlerini anlamlarıyla eşleştirme" (42% success)
  - "İkilemeler" (48% success)

Estimated Study Time: 3-4 hours spread over 1 week
Impact Score: 8.5/10 (High frequency + Clear improvement path)
```

### Example Study Plan Output
```
📅 1 Haftalık Kişisel Çalışma Planı

Pazartesi (2 saat):
  09:00-10:00: Türkçe - Deyimler ve Atasözleri (Video + Not)
  19:00-20:00: Matematik - İkinci Dereceden Denklemler (Soru Çözümü)

Salı (2 saat):
  09:00-10:00: Türkçe - Deyimler Pratik (50 soru)
  19:00-20:00: Fizik - Hareket (Konu Tekrarı)

... (continues for week)

📊 Kapsanan Konular:
  ✓ Türkçe - Deyimler ve Atasözleri (4 saat)
  ✓ Matematik - İkinci Dereceden Denklemler (3 saat)
  ✓ Fizik - Hareket (2 saat)
  ✓ Biyoloji - Hücre Bölünmesi (3 saat)

🎯 Hedef: 4 zayıf kazanımda %20 artış
```

---

## Future Roadmap (Post-MVP)

### Short-term (1-2 months)
- [ ] Multi-user support (for friends/classmates)
- [ ] Question bank integration
- [ ] Spaced repetition study scheduler
- [ ] Mobile app (React Native)
- [ ] Email notifications for recommendations

### Medium-term (3-6 months)
- [ ] AI tutor chat interface
- [ ] Peer comparison (anonymous)
- [ ] Study group features
- [ ] Video lessons integration
- [ ] Predictive analytics (ML models)

### Long-term (6+ months)
- [ ] Integration with official exam systems
- [ ] Marketplace for study materials
- [ ] Teacher/mentor portal
- [ ] Live classes integration
- [ ] Gamification and achievements

---

## Risk Management

### Technical Risks
- **Risk**: Claude API rate limits or downtime
  - **Mitigation**: Implement retry logic, fallback to manual entry
- **Risk**: PDF format variations
  - **Mitigation**: Make parser flexible, add format detection
- **Risk**: Database performance with many exams
  - **Mitigation**: Proper indexing, query optimization, pagination

### Schedule Risks
- **Risk**: Complexity underestimation
  - **Mitigation**: Prioritize MVP features, defer nice-to-haves
- **Risk**: Claude API integration issues
  - **Mitigation**: Test early, have backup plan

---

## Success Metrics

### Phase 1
- [ ] Can process exam.pdf without errors
- [ ] Database contains accurate data

### Phase 2
- [ ] User can upload and view exam results
- [ ] Mobile-friendly interface

### Phase 3
- [ ] Can visualize progress with 3+ exams
- [ ] Analytics load in < 2 seconds

### Phase 4
- [ ] Generates 5-10 relevant recommendations
- [ ] Updates automatically

### Phase 5
- [ ] Application deployed and accessible
- [ ] Zero critical bugs
- [ ] Eren uses it regularly

---

## Notes

- This plan is iterative; each phase builds on the previous
- Start simple, add complexity gradually
- Test with real data (exam.pdf) at each phase
- Get feedback from Eren after each phase
- Be flexible to adjust based on learnings
- Document decisions and changes in PROGRESS.md

---

## Getting Started

To begin implementation:
1. ✅ Read CLAUDE.md for project context
2. ✅ Review ARCHITECTURE.md for design details
3. ✅ Follow Phase 1 tasks in order
4. Update PROGRESS.md as you complete tasks
5. Commit code regularly with descriptive messages

Let's build something great! 🚀
